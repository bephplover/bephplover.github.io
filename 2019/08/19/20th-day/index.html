<!DOCTYPE html>
<html>

<head><meta name="generator" content="Hexo 3.9.0">
  
  <title>20th-day - Cupid&#39;s Blog</title>
  <meta charset="UTF-8">
  <meta name="description" content="a new ctfer&#39;s study">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  

  <link rel="shortcut icon" href="/favicon.ico" type="image/png">
  <meta name="description" content="46.php大法(http://ctf5.shiyanbar.com/DUTCTF/index.php)&amp;emsp;&amp;emsp;这道题进入页面后正好是那次什么鬼那道题串题了，打开它的提示index.php.txt发现如下代码">
<meta property="og:type" content="article">
<meta property="og:title" content="20th-day">
<meta property="og:url" content="http://yoursite.com/2019/08/19/20th-day/index.html">
<meta property="og:site_name" content="Cupid&#39;s Blog">
<meta property="og:description" content="46.php大法(http://ctf5.shiyanbar.com/DUTCTF/index.php)&amp;emsp;&amp;emsp;这道题进入页面后正好是那次什么鬼那道题串题了，打开它的提示index.php.txt发现如下代码">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-08-19T01:53:56.211Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="20th-day">
<meta name="twitter:description" content="46.php大法(http://ctf5.shiyanbar.com/DUTCTF/index.php)&amp;emsp;&amp;emsp;这道题进入页面后正好是那次什么鬼那道题串题了，打开它的提示index.php.txt发现如下代码">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdui@0.4.3/dist/css/mdui.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.15.8/styles/atom-one-dark.css">
  
  
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1038733_0xvrvpg9c0r.css">
  <link rel="stylesheet" href="/css/style.css?v=1577969619329">
</head>

<body class="mdui-drawer-body-left">
  
  <div id="nexmoe-background">
    <div class="nexmoe-bg" style="background-image: url(http://p0.ssl.cdn.btime.com/t01cd55c4b5ab3036c2.jpg#是博客的背景，又是文章默认头图)"></div>
    <div class="mdui-appbar mdui-shadow-0">
      <div class="mdui-toolbar">
        <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">menu</i></a>
        <div class="mdui-toolbar-spacer"></div>
        <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
        <a href="/" title="Cupid" class="mdui-btn mdui-btn-icon"><img src="/images/namei.png"></a>
       </div>
    </div>
  </div>
  <div id="nexmoe-header">
      <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="Cupid">
            <img src="/images/namei.png" alt="Cupid">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>Articles</span>61</div>
        <div><span>Tags</span>0</div>
        <div><span>Categories</span>0</div>
    </div>
    <ul class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/" title="回到首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                回到首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/about.html" title="关于博客">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                关于博客
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/PY.html" title="我的朋友">
            <i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i>
            <div class="mdui-list-item-content">
                我的朋友
            </div>
        </a>
        
    </ul>
    <aside id="nexmoe-sidebar">
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">Social</h3>
    <div class="nexmoe-widget nexmoe-social">
        <a class="mdui-ripple" href="https://space.bilibili.com/23290461" target="_blank" mdui-tooltip="{content: '哔哩哔哩'}" style="color: rgb(231, 106, 141);background-color: rgba(231, 106, 141, .15);">
            <i class="nexmoefont icon-bilibili"></i>
        </a><a class="mdui-ripple" href="https://github.com/bephplover" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color: rgb(25, 23, 23);background-color: rgba(25, 23, 23, .15);">
            <i class="nexmoefont icon-github"></i>
        </a>
    </div>
</div>
  
  

  
  
  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">Archive</h3>
    <div class="nexmoe-widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li></ul>
    </div>
  </div>


  
</aside>
    <div class="nexmoe-copyright">
        &copy; 2020 Cupid
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://nexmoe.com/hexo-theme-nexmoe.html" target="_blank">Nexmoe</a>
    </div>
</div><!-- .nexmoe-drawer -->
  </div>
  <div id="nexmoe-content">
    <div class="nexmoe-primary">
        <div class="nexmoe-post">
    <div class="nexmoe-post-cover"> 
        
            <img src="http://p0.ssl.cdn.btime.com/t01cd55c4b5ab3036c2.jpg#是博客的背景，又是文章默认头图">
        
        <h1>20th-day</h1>
    </div>
  <div class="nexmoe-post-meta">
    <a><i class="nexmoefont icon-calendar-fill"></i>2019年08月19日</a>
    <a><i class="nexmoefont icon-areachart"></i>1.4k 字</a>
    <a><i class="nexmoefont icon-time-circle-fill"></i>大概 5 分钟</a>
    
    
  </div>
  <article>
    <p>46.php大法(<a href="http://ctf5.shiyanbar.com/DUTCTF/index.php" title="php大法" target="_blank" rel="noopener">http://ctf5.shiyanbar.com/DUTCTF/index.php</a>)<br>&emsp;&emsp;这道题进入页面后正好是那次什么鬼那道题串题了，打开它的提示index.php.txt发现如下代码<a id="more"></a>:<br>php<br>if(eregi(“hackerDJ”,$_GET[id])) {<br>  echo(“</p><p>not allowed!</p>“);<br>  exit();<br>}<p></p>
<p>$_GET[id] = urldecode($_GET[id]);<br>if($_GET[id] == “hackerDJ”)<br>{<br>  echo “</p><p>Access granted!</p>“;<br>  echo “<p>flag: <strong><strong><strong>*****</strong></strong></strong>} </p>“;<br>}<br>按代码意思如果id与hackerDJ相同就输出Not allowed让get得到的Id等于Url解码的Id,这时候如果Id=hackerDJ就给出flag.这道题将hackerDJ进行两次Url编码，再payload:index.php?id=hackerDJ的两次编码即可拿下flag.<br>&emsp;&emsp;summary：这道题之前做过一遍了，为什么要两次编码是因为url本身要解码一次这样也让其不至于直接等于hackerDJ绕过判断，由于代码本身解码了一次，因而编码两次正好满足条件得到flag.<br>47.FALSE(<a href="http://ctf5.shiyanbar.com/web/false.php" title="FALSE" target="_blank" rel="noopener">http://ctf5.shiyanbar.com/web/false.php</a>)<br>&emsp;&emsp;这道题在进入页面前还有提示:PHP代码审计<br>hint：sha1函数你有认真了解过吗？听说也有人用md5碰撞o(╯□╰)o<br>进入页面后会看到一个登陆框,然后可以看它的源代码，先查看源代码吧。<br>if (isset($_GET[‘name’]) and isset($_GET[‘password’])) {<br>    if ($_GET[‘name’] == $_GET[‘password’])<br>        echo ‘<p>Your password can not be your name!</p>‘;<br>    else if (sha1($_GET[‘name’]) === sha1($_GET[‘password’]))<br>      die(‘Flag: ‘.$flag);<br>    else<br>        echo ‘<p>Invalid password.</p>‘;<br>}<br>else{<br>    echo ‘<p>Login first!</p>‘;<br>阅读代码意思就是输入两个sha1相同的用户名和密码就能登陆并且给我们flag.上次做bugku就记录了一些sha1之后等于0e的现在可以试试，不过先尝试一下数组。直接得到了flag.这里用0e的值失败了，给出的是不合法的password上次是md5的等于0e因而这道题要找sha1等于0e的就不继续尝试了，因为数组都等于false因而直接相等得到flag.<br>&emsp;&emsp;这道题之前也做过类似的，因而难度不大，关键点就是要知道sha1与md5函数在加解密数组时都会变成false因而直接通过判断。<br>48.拐弯抹角(<a href="http://ctf5.shiyanbar.com/indirection/" title="如何欺骗服务器" target="_blank" rel="noopener">http://ctf5.shiyanbar.com/indirection/</a>)<br>&emsp;&emsp;这道题好长的代码，就不复制了。这道题的大致意思是满足他要求的7个条件这样$stop变量会在循环中增长到从而得到flag.那么它需要满足哪7个条件呢:<br>第一个要求就是不得出现 ./<br>第二个要求就是不得出现 ../<br>第三个要求对可以用的字符做了限制，a-z / 和 .<br>第四个要求是不得出现 //<br>第五个要求就是必须包含/index.php，并且以此结尾<br>第六个要求我们禁止p后面出现.这个符号<br>第七个要求你的$URL必须与/indirection/index.php有所不同<br>这道题我瞎整index.php/index.php就出来了flag,但具体原因我还为得知，因而去看看大佬们的WP。<br>题目的意思就是通过改变URL地址栏访问index.php，但是限制了条件不能使用 ./ ../ \ 而且只能使用小写字母，不可以在php后加点。<br>这里我们可以利用伪静态技术，使用<a href="http://ctf5.shiyanbar.com/indirection/index.php/index.php，index.php后的index.php会被当做参数处理，所以服务器只会解析第一个index.php，满足条件成功绕过。" target="_blank" rel="noopener">http://ctf5.shiyanbar.com/indirection/index.php/index.php，index.php后的index.php会被当做参数处理，所以服务器只会解析第一个index.php，满足条件成功绕过。</a><br>什么是伪静态技术:<br>URL伪静态就是通过对动态网页进行URL处理（重写），从而实现看起来像是静态URL页面（而实际网页目录或路径中没有该页面）的方法，表现形式主要是去掉动态网页QUERY参数，还有可以让URL看起来更加有序条理。<br>例如:<a href="http://www.example.com/test.php?cate=soft&amp;page=2" target="_blank" rel="noopener">http://www.example.com/test.php?cate=soft&amp;page=2</a><br>就可以变成<a href="http://www.example.com/test/soft/index/2.html" target="_blank" rel="noopener">http://www.example.com/test/soft/index/2.html</a><br>&emsp;&emsp;这里关于这个伪静态技术我又掌握了一点，它是有利弊的由于其采用正则判断因而很容易导致CPU超负，不用伪静态技术的服务器可以承受更多的访问。SEO-搜索引擎优化。<br>49.Forms(<a href="http://ctf5.shiyanbar.com/10/main.php" title="PIN码破解" target="_blank" rel="noopener">http://ctf5.shiyanbar.com/10/main.php</a>)<br>&emsp;&emsp;进入页面就是一个PIN的输入框，先百度一下这是个什么东西。PIN码(PIN1)，全称Personal Identification Number.就是SIM卡的个人识别密码。如果启用了开机PIN码,开机后就要输入4到8位数PIN码.直接破解肯定是不行了这道题既然叫forms表单那么应该从表单入手，F12打开工作台，在查看器中发现了<input type="hidden" name="showsource" value>这里的value的值为null我改成1之后提交表单框试试。发现给出如下代码:<br>$a = $_POST[“PIN”];<br>if ($a == -19827747736161128312837161661727773716166727272616149001823847) {<br>    echo “Congratulations! The flag is $flag”;<br>} else {<br>    echo “User with provided PIN not found.”;<br>}<br>因而直接把-19827747736161128312837161661727773716166727272616149001823847粘贴进表单框就得到了flag.<br>&emsp;&emsp;这道题主要是对表单框的一个掌握，这里的shousource这里就是一个隐藏的可以看源码的一个表单input项，当把值设置成1时再提交表单框这个隐藏的就会显示出来。<br>html中value的作用:<br>按钮中用的value 指的是按钮上要显示的文本,比如‘确定,删除 等等字样‘<br>复选框用的value指的是,这个复选框的值<br>单选框用的value和复选框的作用一样<br>下拉菜单用的value是列表中每个子项的值<br>隐藏域用的value是框里面显示的内容<p></p>

  </article>
  
    
<div class="nexmoe-post-copyright">
<i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
<strong>Author：</strong>Cupid<br>
<strong>Link：</strong><a href="http://yoursite.com/2019/08/19/20th-day/" title="http://yoursite.com/2019/08/19/20th-day/" target="_blank" rel="noopener">http://yoursite.com/2019/08/19/20th-day/</a><br>

  <strong>版权声明：</strong>本文采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> 协议进行许可

</div>


  
  <section class="nexmoe-comment">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.5.0/dist/gitalk.min.css">
<div id="gitalk"></div>
<script src="https://cdn.jsdelivr.net/npm/gitalk@1.5.0/dist/gitalk.min.js"></script>
<script type="text/javascript">
    var gitalk = new Gitalk({
        clientID: '80b2453b6d5f37ad6225',
        clientSecret: '43e99fa852795c9a7b3eb924b2558c64b84bbdeb',
        id: window.location.pathname,
        repo: 'nexmoe.github.io',
        owner: 'nexmoe',
        admin: 'nexmoe'
    })
    gitalk.render('gitalk')
</script>
</section>
</div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/mdui@0.4.3/dist/js/mdui.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>




<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.8/build/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script src="/js/app.js?v=1577969619366"></script>
<script src="https://cdn.jsdelivr.net/npm/lazysizes@5.1.0/lazysizes.min.js"></script>


    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/xtaodada/xtaodada.github.io@0.0.2/copy.js"></script>



  





</body>

</html>
